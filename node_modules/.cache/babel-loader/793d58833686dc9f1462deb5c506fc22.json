{"ast":null,"code":"(function () {\n  var width,\n      height,\n      largeHeader,\n      canvas,\n      ctx,\n      points,\n      target,\n      animateHeader = true; // Main\n\n  initHeader();\n  initAnimation();\n  addListeners();\n\n  function initHeader() {\n    width = window.innerWidth;\n    height = window.innerHeight;\n    target = {\n      x: width / 2,\n      y: height / 2\n    };\n    largeHeader = document.getElementById('large-header');\n    largeHeader.style.height = height + 'px';\n    canvas = document.getElementById('demo-canvas');\n    canvas.width = width;\n    canvas.height = height;\n    ctx = canvas.getContext('2d'); // create points\n\n    points = [];\n\n    for (var x = 0; x < width; x = x + width / 20) {\n      for (var y = 0; y < height; y = y + height / 20) {\n        var px = x + Math.random() * width / 20;\n        var py = y + Math.random() * height / 20;\n        var p = {\n          x: px,\n          originX: px,\n          y: py,\n          originY: py\n        };\n        points.push(p);\n      }\n    } // for each point find the 5 closest points\n\n\n    for (var i = 0; i < points.length; i++) {\n      var closest = [];\n      var p1 = points[i];\n\n      for (var j = 0; j < points.length; j++) {\n        var p2 = points[j];\n\n        if (!(p1 == p2)) {\n          var placed = false;\n\n          for (var k = 0; k < 5; k++) {\n            if (!placed) {\n              if (closest[k] == undefined) {\n                closest[k] = p2;\n                placed = true;\n              }\n            }\n          }\n\n          for (var k = 0; k < 5; k++) {\n            if (!placed) {\n              if (getDistance(p1, p2) < getDistance(p1, closest[k])) {\n                closest[k] = p2;\n                placed = true;\n              }\n            }\n          }\n        }\n      }\n\n      p1.closest = closest;\n    } // assign a circle to each point\n\n\n    for (var i in points) {\n      var c = new Circle(points[i], 2 + Math.random() * 2, 'rgba(255,255,255,0.3)');\n      points[i].circle = c;\n    }\n  } // Event handling\n\n\n  function addListeners() {\n    if (!('ontouchstart' in window)) {\n      window.addEventListener('mousemove', mouseMove);\n    }\n\n    window.addEventListener('scroll', scrollCheck);\n    window.addEventListener('resize', resize);\n  }\n\n  function mouseMove(e) {\n    var posx = posy = 0;\n\n    if (e.pageX || e.pageY) {\n      posx = e.pageX;\n      posy = e.pageY;\n    } else if (e.clientX || e.clientY) {\n      posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\n      posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\n    }\n\n    target.x = posx;\n    target.y = posy;\n  }\n\n  function scrollCheck() {\n    if (document.body.scrollTop > height) animateHeader = false;else animateHeader = true;\n  }\n\n  function resize() {\n    width = window.innerWidth;\n    height = window.innerHeight;\n    largeHeader.style.height = height + 'px';\n    canvas.width = width;\n    canvas.height = height;\n  } // animation\n\n\n  function initAnimation() {\n    animate();\n\n    for (var i in points) {\n      shiftPoint(points[i]);\n    }\n  }\n\n  function animate() {\n    if (animateHeader) {\n      ctx.clearRect(0, 0, width, height);\n\n      for (var i in points) {\n        // detect points in range\n        if (Math.abs(getDistance(target, points[i])) < 4000) {\n          points[i].active = 0.3;\n          points[i].circle.active = 0.6;\n        } else if (Math.abs(getDistance(target, points[i])) < 20000) {\n          points[i].active = 0.1;\n          points[i].circle.active = 0.3;\n        } else if (Math.abs(getDistance(target, points[i])) < 40000) {\n          points[i].active = 0.02;\n          points[i].circle.active = 0.1;\n        } else {\n          points[i].active = 0;\n          points[i].circle.active = 0;\n        }\n\n        drawLines(points[i]);\n        points[i].circle.draw();\n      }\n    }\n\n    requestAnimationFrame(animate);\n  }\n\n  function shiftPoint(p) {\n    TweenLite.to(p, 1 + 1 * Math.random(), {\n      x: p.originX - 50 + Math.random() * 100,\n      y: p.originY - 50 + Math.random() * 100,\n      ease: Circ.easeInOut,\n      onComplete: function onComplete() {\n        shiftPoint(p);\n      }\n    });\n  } // Canvas manipulation\n\n\n  function drawLines(p) {\n    if (!p.active) return;\n\n    for (var i in p.closest) {\n      ctx.beginPath();\n      ctx.moveTo(p.x, p.y);\n      ctx.lineTo(p.closest[i].x, p.closest[i].y);\n      ctx.strokeStyle = 'rgba(156,217,249,' + p.active + ')';\n      ctx.stroke();\n    }\n  }\n\n  function Circle(pos, rad, color) {\n    var _this = this; // constructor\n\n\n    (function () {\n      _this.pos = pos || null;\n      _this.radius = rad || null;\n      _this.color = color || null;\n    })();\n\n    this.draw = function () {\n      if (!_this.active) return;\n      ctx.beginPath();\n      ctx.arc(_this.pos.x, _this.pos.y, _this.radius, 0, 2 * Math.PI, false);\n      ctx.fillStyle = 'rgba(156,217,249,' + _this.active + ')';\n      ctx.fill();\n    };\n  } // Util\n\n\n  function getDistance(p1, p2) {\n    return Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2);\n  }\n})();","map":{"version":3,"sources":["C:\\Users\\Max\\my-projekt-college\\src\\js\\canvas-backgraund.js"],"names":["width","height","largeHeader","canvas","ctx","points","target","animateHeader","initHeader","initAnimation","addListeners","window","innerWidth","innerHeight","x","y","document","getElementById","style","getContext","px","Math","random","py","p","originX","originY","push","i","length","closest","p1","j","p2","placed","k","undefined","getDistance","c","Circle","circle","addEventListener","mouseMove","scrollCheck","resize","e","posx","posy","pageX","pageY","clientX","clientY","body","scrollLeft","documentElement","scrollTop","animate","shiftPoint","clearRect","abs","active","drawLines","draw","requestAnimationFrame","TweenLite","to","ease","Circ","easeInOut","onComplete","beginPath","moveTo","lineTo","strokeStyle","stroke","pos","rad","color","_this","radius","arc","PI","fillStyle","fill","pow"],"mappings":"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","sourcesContent":["(function() {\r\n\r\n    var width, height, largeHeader, canvas, ctx, points, target, animateHeader = true;\r\n\r\n    // Main\r\n    initHeader();\r\n    initAnimation();\r\n    addListeners();\r\n\r\n    function initHeader() {\r\n        width = window.innerWidth;\r\n        height = window.innerHeight;\r\n        target = {x: width/2, y: height/2};\r\n\r\n        largeHeader = document.getElementById('large-header');\r\n        largeHeader.style.height = height+'px';\r\n\r\n        canvas = document.getElementById('demo-canvas');\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        ctx = canvas.getContext('2d');\r\n\r\n        // create points\r\n        points = [];\r\n        for(var x = 0; x < width; x = x + width/20) {\r\n            for(var y = 0; y < height; y = y + height/20) {\r\n                var px = x + Math.random()*width/20;\r\n                var py = y + Math.random()*height/20;\r\n                var p = {x: px, originX: px, y: py, originY: py };\r\n                points.push(p);\r\n            }\r\n        }\r\n\r\n        // for each point find the 5 closest points\r\n        for(var i = 0; i < points.length; i++) {\r\n            var closest = [];\r\n            var p1 = points[i];\r\n            for(var j = 0; j < points.length; j++) {\r\n                var p2 = points[j]\r\n                if(!(p1 == p2)) {\r\n                    var placed = false;\r\n                    for(var k = 0; k < 5; k++) {\r\n                        if(!placed) {\r\n                            if(closest[k] == undefined) {\r\n                                closest[k] = p2;\r\n                                placed = true;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    for(var k = 0; k < 5; k++) {\r\n                        if(!placed) {\r\n                            if(getDistance(p1, p2) < getDistance(p1, closest[k])) {\r\n                                closest[k] = p2;\r\n                                placed = true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            p1.closest = closest;\r\n        }\r\n\r\n        // assign a circle to each point\r\n        for(var i in points) {\r\n            var c = new Circle(points[i], 2+Math.random()*2, 'rgba(255,255,255,0.3)');\r\n            points[i].circle = c;\r\n        }\r\n    }\r\n\r\n    // Event handling\r\n    function addListeners() {\r\n        if(!('ontouchstart' in window)) {\r\n            window.addEventListener('mousemove', mouseMove);\r\n        }\r\n        window.addEventListener('scroll', scrollCheck);\r\n        window.addEventListener('resize', resize);\r\n    }\r\n\r\n    function mouseMove(e) {\r\n        var posx = posy = 0;\r\n        if (e.pageX || e.pageY) {\r\n            posx = e.pageX;\r\n            posy = e.pageY;\r\n        }\r\n        else if (e.clientX || e.clientY)    {\r\n            posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n            posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n        }\r\n        target.x = posx;\r\n        target.y = posy;\r\n    }\r\n\r\n    function scrollCheck() {\r\n        if(document.body.scrollTop > height) animateHeader = false;\r\n        else animateHeader = true;\r\n    }\r\n\r\n    function resize() {\r\n        width = window.innerWidth;\r\n        height = window.innerHeight;\r\n        largeHeader.style.height = height+'px';\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n    }\r\n\r\n    // animation\r\n    function initAnimation() {\r\n        animate();\r\n        for(var i in points) {\r\n            shiftPoint(points[i]);\r\n        }\r\n    }\r\n\r\n    function animate() {\r\n        if(animateHeader) {\r\n            ctx.clearRect(0,0,width,height);\r\n            for(var i in points) {\r\n                // detect points in range\r\n                if(Math.abs(getDistance(target, points[i])) < 4000) {\r\n                    points[i].active = 0.3;\r\n                    points[i].circle.active = 0.6;\r\n                } else if(Math.abs(getDistance(target, points[i])) < 20000) {\r\n                    points[i].active = 0.1;\r\n                    points[i].circle.active = 0.3;\r\n                } else if(Math.abs(getDistance(target, points[i])) < 40000) {\r\n                    points[i].active = 0.02;\r\n                    points[i].circle.active = 0.1;\r\n                } else {\r\n                    points[i].active = 0;\r\n                    points[i].circle.active = 0;\r\n                }\r\n\r\n                drawLines(points[i]);\r\n                points[i].circle.draw();\r\n            }\r\n        }\r\n        requestAnimationFrame(animate);\r\n    }\r\n\r\n    function shiftPoint(p) {\r\n        TweenLite.to(p, 1+1*Math.random(), {x:p.originX-50+Math.random()*100,\r\n            y: p.originY-50+Math.random()*100, ease:Circ.easeInOut,\r\n            onComplete: function() {\r\n                shiftPoint(p);\r\n            }});\r\n    }\r\n\r\n    // Canvas manipulation\r\n    function drawLines(p) {\r\n        if(!p.active) return;\r\n        for(var i in p.closest) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(p.x, p.y);\r\n            ctx.lineTo(p.closest[i].x, p.closest[i].y);\r\n            ctx.strokeStyle = 'rgba(156,217,249,'+ p.active+')';\r\n            ctx.stroke();\r\n        }\r\n    }\r\n\r\n    function Circle(pos,rad,color) {\r\n        var _this = this;\r\n\r\n        // constructor\r\n        (function() {\r\n            _this.pos = pos || null;\r\n            _this.radius = rad || null;\r\n            _this.color = color || null;\r\n        })();\r\n\r\n        this.draw = function() {\r\n            if(!_this.active) return;\r\n            ctx.beginPath();\r\n            ctx.arc(_this.pos.x, _this.pos.y, _this.radius, 0, 2 * Math.PI, false);\r\n            ctx.fillStyle = 'rgba(156,217,249,'+ _this.active+')';\r\n            ctx.fill();\r\n        };\r\n    }\r\n\r\n    // Util\r\n    function getDistance(p1, p2) {\r\n        return Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2);\r\n    }\r\n    \r\n})();"]},"metadata":{},"sourceType":"module"}